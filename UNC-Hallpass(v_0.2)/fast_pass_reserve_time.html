<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>UNC Hall Pass - FAST PASS </title>
    <meta name="viewport" content="widtd=device-widtd, initial-scale=1.0">
    <meta name="autdor" content="">
    <meta name="description" content="">
    <meta name="keywords" content="">
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<link rel="shortcut icon" type="image/png" href="images/apple-touch-icon.png" />
    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <!-- Main css -->
    <link rel="stylesheet" href="css/UNC-style.css">
</head>
<body class="">
    <!-- HEADER START -->
    <header id="topnav" class="defaultscroll sticky bg-header">
        <div>
            <a class="logo" href="#">
                <div class="align-self-center custom-logo-link">
                    <img src="images/header_logo.png" width="180" height="30" class="logoImg" />
                </div>
            </a>
        </div>
        <div class="menu-extras">
            <div class="menu-item">
                <a class="navbar-toggle">
                    <div class="lines">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </a>
                <!-- End mobile menu toggle-->
            </div>
        </div>
        <div id="navigation">
            <ul class="navigation-menu">
				<li><a href="#">LOGIN</a></li>
				<li class="has-submenu">
					<a href="#">MY TESTING</a>
					<ul class="submenu megamenu">
						<li>
							<ul>
								<li><a href="test_procedure.html">TESTING HOW TO <i class="feather icon-chevron-right arrow-menu"></i></a></li>
								<li><a href="find_test_site.html">FIND TEST SITE <i class="feather icon-chevron-right arrow-menu"></i></a></li>     
								<li><a href="scan_new_test.html">START NEW TEST <i class="feather icon-chevron-right arrow-menu"></i></a></li>     
							</ul>
						</li>
					</ul>
				</li>
                <li class="has-submenu">
					<a href="#">MY SCHEDULE</a>
					<ul class="submenu megamenu">
						<li>
							<ul>
								<li><a href="schedule.html">MY CLASS SCHEDULE <i class="feather icon-chevron-right arrow-menu"></i></a></li>
								<li><a href="search.html">CLASS SEARCH <i class="feather icon-chevron-right arrow-menu"></i></a></li>        
							</ul>
						</li>
					</ul>
				</li>
				<li><a href="#">ACCESSIBILITY</a></li>
				<li><a href="#">SUPPORT</a></li>
				<li><a href="#">CONTACT</a></li>
            </ul>
        </div>
		<div class="headTab-blue">
			<table class="table table-sm">
				<tr>
					<td>
						FAST PASS 
					</td>
					<td></td>
				</tr>
			</table>
		</div>
    </header>
    <!-- HEADER END -->
	<!-- UNC CONTENT - START -->
    <section class="mobile-view-home p-2 ">
        <div class="container">
			<div class="row pt-2">
				<div class="breadcrumb-wrapper col-12">
					<ol class="breadcrumb">
						<li class="breadcrumb-item"><a href="#" aria-labelledby="My Testing" aria-label="My Testing">My Testing</a></li>
						<li class="breadcrumb-item"><a href="#" aria-labelledby="Find Test Site" aria-label="Find Test Site">Find Test Site</a></li>
						<li class="breadcrumb-item"><a href="#" aria-labelledby="Student Union" aria-label="Student Union">Student Union</a></li>
						<li class="breadcrumb-item" aria-labelledby="Reserve Time" aria-label="Reserve Time">Reserve Time</li>
					</ol>
				</div>
			</div>
            <div class="pt-2 reserveTime reserveYes head-wrapper" style="display:none !important;">
				<div class="mt-2 mb-0">
					<h2 aria-labelledby="Confirm Time" aria-label="Confirm Time" class="head-h2">Confirm Time</h2>
                </div>
				<div class="mt-4">
					<p>You are reserving the time below for the selected testing site. After you reserve this time, you will be able to arrive at the site on the given time and skip any line that exists at the time.</p>
				</div>
				<div class="resDataYes">
					<!-- reserve time and location data append here... -->
				</div>
			</div>
			
			
			<div class="pt-2 reserveTime reserveNo head-wrapper" style="display:none !important;">
				<div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 head-content mt-2 mb-0">
					<h2 aria-labelledby="Confirm Time" aria-label="Confirm Time" class="head-confirm">Oh No!</h2>
                </div>
				<div class="col-12 content-p mt-4">
					<p>Unfortunately the time you are trying to reserve for the selected testing site is booked. Please select another time or location to receive a test.</p>
				</div>
				<div class="resDataNo">
					<!-- reserve time and location data append here... -->
				</div>
			</div>
			
			
			<div class="row pt-5 mt-4 mb-2">
				<div class="col-5 mt-0">
					<div class="login-btn mt-0 p-0 mt-5">
						<a href="find_test_site_student_union.html"><button aria-label="CONTINUE" aria-labelledby="CONTINUE" class="btn btn-block btn-back-1">
						<i class="feather icon-chevron-left"></i>
						BACK
						</button></a>
					</div>
				</div>
				<div id="reserveBtn" class="col-7 mt-0" style="display:none;">
					<div class="login-btn mt-0 p-0 mr-1 mt-5 mr-1">
						<button aria-label="CONTINUE" aria-labelledby="CONTINUE" data-reserve = "" class="btn btn-block btn-log-1 reserve-time">
						RESERVE TIME 
						<i class="feather icon-chevron-right"></i>
						</button>
					</div>
				</div>
			</div>            
        </div>
    </section>
	<!-- UNC CONTENT - END -->
	<!-- FOOTER CONTENT  - START -->
    <footer class="footer-content footer-table">
        <table class="table" cellspacing="5" border="0">
            <tr>
                <td>
					<a href="home.html"><img aria-label="home" aria-labelledby="home" src="images/home_black.png" width="45" alt="home" /></a>
					<div>HOME</div>
				</td>
                <td>
					<a href="myTestingCompliants.html"><img aria-label="My Testing" aria-labelledby="My Testing" src="images/test_black.png" width="45" alt="My Testing" /></a>
					<div>MY TESTING</div>
				</td>
                <td>
					<a href="schedule.html"><img aria-label="Class Schedule" aria-labelledby="Class Schedule" src="images/schedule_black.png" width="45" alt="Class Schedule" /></a>
					<div>CLASS SCHEDULE</div>
				</td>
            </tr>
        </table>
    </footer>
    <!-- FOOTER CONTENT - END -->
    <!-- javascript -->
    <script src="js/jquery-3.5.1.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/jquery.easing.min.js"></script>
    <script src="js/scrollspy.min.js"></script>
    <script src="js/app.js"></script>
</body>
<script>
$(document).ready(function() {
	var availSlot = localStorage.getItem("avail-slot").split('#');
	var locationName = localStorage.getItem('location-name');
	var available = localStorage.getItem("available");
	var resHtml = '';
	if(available == "YES"){
		$(".reserveYes").show();
		$.post("http://192.168.43.117:8080/AOMS/getReserveConfirmTimeData", {
		pid: "7203-11076",
		current_day: availSlot[0],
		current_date: availSlot[1],
		slot_time : availSlot[0],
		location_name : locationName
		},
		function(data, status) {
			if(data.status == "success"){
				resHtml = '<button class="btn btn-lg btn-time-blue ml-1">'+availSlot[0]+'</button><h3 class="ml-1 mt-4" aria-labelledby="" aria-label="">'+locationName+'</h3>';	
				$(".reserve-time").attr('data-reserve',availSlot+"#"+locationName);
				
				$("#reserveBtn").show();
			}else{
				alert("Time slots are booked. Please try with some other times!.");
			}
			$(".resDataYes").append(resHtml);			
		});
	}else{
		$(".reserveNo").show();
		resHtml = '<button class="btn btn-lg btn-time-pink ml-1">'+localStorage.getItem("avail-time")+'</button><h3 class="ml-1 mt-4" aria-labelledby="" aria-label="">'+locationName+'</h3>';	
				$(".reserve-time").attr('data-reserve',availSlot+"#"+locationName);
		$(".resDataNo").append(resHtml);
	} 

	$(document).on('click','.reserve-time',function(){
		$.post("http://192.168.43.117:8080/AOMS/getReserveConfirmTimeThxData", {
			pid: "7203-11076",
			current_day: availSlot[0],
			current_date: availSlot[1],
			slot_time : availSlot[0],
			location_name : locationName
		},
		function(data, status) {
			if(data.status == "success"){
				var com = locationName+"#"+data.slotTime+"#"+data.confirmQrCodeImg;
				localStorage.setItem("confirm-slot",com);
				window.location.href = "fast_pass_complete.html";
			}else{
				alert("Time slots are booked. Please try with some other times!.");
			}			
		});
	});	
});
</script>
</html>
